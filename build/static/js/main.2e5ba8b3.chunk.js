(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),u=t(14),i=t.n(u),s=(t(20),t(3)),o=(t(21),function(e){var n=e.changeHandler;return Object(c.jsxs)("div",{className:"m-4",children:[Object(c.jsx)("p",{children:"Search:"}),Object(c.jsx)("input",{className:"input",onChange:function(e){return n(e)}})]})}),l=function(e){var n=e.nameChangeHandler,t=e.numberChangeHandler,r=e.clickHandler;return Object(c.jsx)("div",{className:"m-4",children:Object(c.jsxs)("form",{onSubmit:function(e){return r(e)},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Name:"}),Object(c.jsx)("input",{className:"input",onChange:function(e){return n(e)}})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Number:"}),Object(c.jsx)("input",{className:"input",onChange:function(e){return t(e)}})]}),Object(c.jsx)("button",{className:"primary",type:"submit",children:"Add"})]})})},d=function(e){var n=e.name,t=e.number,r=e.clickHandler;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:n}),Object(c.jsx)("td",{children:t}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:"danger",onClick:function(){return r()},children:"Delete"})})]})},m=function(e){var n=e.error,t=e.message;return null===t?null:Object(c.jsx)("p",{className:"".concat(n?"error":"success"),children:t})},j=t(4),b=t.n(j),f="https://fso-puhelinluettelo-v2.herokuapp.com/api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e)},update:function(e,n){return b.a.put("".concat(f,"/").concat(e),n)},remove:function(e){return b.a.delete("".concat(f,"/").concat(e))}},p=function(){var e=Object(r.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),i=Object(s.a)(u,2),j=i[0],b=i[1],f=Object(r.useState)(""),p=Object(s.a)(f,2),O=p[0],x=p[1],g=Object(r.useState)(""),v=Object(s.a)(g,2),N=v[0],w=v[1],C=Object(r.useState)(null),y=Object(s.a)(C,2),D=y[0],H=y[1],S=Object(r.useState)(!1),k=Object(s.a)(S,2),A=k[0],T=k[1];Object(r.useEffect)((function(){h.getAll().then((function(e){a(e)}))}),[]);var F,L=function(e,n){h.update(e.id,n).then((function(){return h.getAll()})).then((function(e){a(e),T(!1),H("Update successful: ".concat(n.name," - ").concat(n.number)),setTimeout((function(){H(null)}),3e3)})).catch((function(){T(!0),H(e.name+" is already deleted."),setTimeout((function(){H(null)}),3e3)}))};return F=A?Object(c.jsx)(m,{error:!0,message:D}):Object(c.jsx)(m,{error:!1,message:D}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{className:"main-header",children:"Phonebook"}),Object(c.jsx)(o,{changeHandler:function(e){w(e.target.value)}}),Object(c.jsx)("h3",{className:"sub-header",children:"Add a new person"}),Object(c.jsx)(l,{nameChangeHandler:function(e){b(e.target.value)},numberChangeHandler:function(e){x(e.target.value)},clickHandler:function(e){e.preventDefault(),h.create({name:j,number:O}).then((function(){return h.getAll()})).then((function(e){a(e),T(!1),H("Added "+j),setTimeout((function(){H(null)}),3e3)})).catch((function(e){var n=e.response.data.errorMessage;if("Duplicate name. Duplicate number."===n)n="Identical entry already exists.";else if("Duplicate name."===n){var c=t.find((function(e){return e.name===j}));if(window.confirm("A phone number with this name already exists. Do you want to update the number?"))return void L(c,{name:j,number:O})}else if("Duplicate number."===n){var r=t.find((function(e){return e.number===O}));if(window.confirm("This phone number is already assigned to a person. Do you want to update the name?"))return void L(r,{name:j,number:O})}else T(!0),H(n),setTimeout((function(){H(null)}),3e3)}))}}),F,Object(c.jsx)("h2",{className:"sub-header",children:"Numbers"}),Object(c.jsx)("table",{className:"m-4",children:t.map((function(e){return e.name.toLowerCase().includes(N.toLowerCase())?Object(c.jsx)(d,{name:e.name,number:e.number,clickHandler:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Confirm delete "+n.name)&&h.remove(e).then((function(){return h.getAll()})).then((function(e){a(e),T(!1),H("Deleted "+n.name),setTimeout((function(){H(null)}),3e3)})).catch((function(){T(!0),H(n.name+" is already deleted.")}))}(e.id)}},e.name):null}))})]})},O=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,a=n.getLCP,u=n.getTTFB;t(e),c(e),r(e),a(e),u(e)}))};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),O()}},[[39,1,2]]]);
//# sourceMappingURL=main.2e5ba8b3.chunk.js.map