{"version":3,"sources":["components/Search.js","components/Add.js","components/Person.js","components/Notification.js","crud_service.js","App.js","reportWebVitals.js","index.js"],"names":["Search","changeHandler","className","onChange","e","Add","nameChangeHandler","numberChangeHandler","clickHandler","onSubmit","type","Person","name","number","onClick","Notification","error","message","url","service","getAll","axios","get","then","res","data","create","item","post","update","itemId","put","remove","delete","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","searchWord","setSearchWord","setMessage","setError","useEffect","notification","handleUpdate","person","newData","id","setTimeout","catch","target","value","preventDefault","result","err","errorMessage","response","match","find","i","window","confirm","map","toLowerCase","includes","n","handleDeleteClick","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2e5ba8b3.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Search = ({ changeHandler }) => {\r\n    return (\r\n        <div className=\"m-4\">\r\n            <p>Search:</p>\r\n            <input className=\"input\" onChange={(e) => changeHandler(e)} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import React from \"react\";\r\n\r\nexport const Add = ({ nameChangeHandler, numberChangeHandler, clickHandler }) => {\r\n    return (\r\n        <div className={\"m-4\"}>\r\n            <form onSubmit={(e) => clickHandler(e)}>\r\n                <div>\r\n                    <p>Name:</p>\r\n                    <input className=\"input\" onChange={(e) => nameChangeHandler(e)} />\r\n                </div>\r\n                <div>\r\n                    <p>Number:</p>\r\n                    <input className=\"input\" onChange={(e) => numberChangeHandler(e)} />\r\n                </div>\r\n                <button className=\"primary\" type=\"submit\">\r\n                    Add\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Add;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ name, number, clickHandler }) => {\r\n    return (\r\n        <tr>\r\n            <td>{name}</td>\r\n            <td>{number}</td>\r\n            <td>\r\n                <button className=\"danger\" onClick={() => clickHandler()}>\r\n                    Delete\r\n                </button>\r\n            </td>\r\n        </tr>\r\n    );\r\n};\r\n\r\nexport default Person;\r\n","const Notification = ({ error, message }) => {\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n\r\n    return <p className={`${error ? \"error\" : \"success\"}`}>{message}</p>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\n\r\nconst url = \"https://fso-puhelinluettelo-v2.herokuapp.com/api/persons\";\r\n/* const url = \"http://localhost:3001/api/persons\"; */\r\n\r\nconst getAll = () => {\r\n    return axios.get(url).then((res) => res.data);\r\n};\r\n\r\nconst create = (item) => {\r\n    return axios.post(url, item);\r\n};\r\n\r\nconst remove = (itemId) => {\r\n    return axios.delete(`${url}/${itemId}`);\r\n};\r\n\r\nconst update = (itemId, data) => {\r\n    return axios.put(`${url}/${itemId}`, data);\r\n};\r\n\r\nconst service = { getAll, create, update, remove };\r\nexport default service;\r\n","import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport Search from \"./components/Search\";\nimport Add from \"./components/Add\";\nimport Person from \"./components/Person\";\nimport Notification from \"./components/Notification\";\n// Separate module for server operations.\nimport service from \"./crud_service\";\n\nconst App = () => {\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState(\"\");\n    const [newNumber, setNewNumber] = useState(\"\");\n    const [searchWord, setSearchWord] = useState(\"\");\n    const [message, setMessage] = useState(null);\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        service.getAll().then((res) => {\n            setPersons(res);\n        });\n    }, []);\n\n    const handleAddClick = (e) => {\n        e.preventDefault();\n\n        service\n            .create({ name: newName, number: newNumber })\n            .then(() => service.getAll())\n            .then((result) => {\n                setPersons(result);\n                setError(false);\n                setMessage(\"Added \" + newName);\n                setTimeout(() => {\n                    setMessage(null);\n                }, 3000);\n            })\n            .catch((err) => {\n                let errorMessage = err.response.data.errorMessage;\n\n                // If exact match exists\n                if (errorMessage === \"Duplicate name. Duplicate number.\") {\n                    errorMessage = \"Identical entry already exists.\";\n                }\n                // If the name already exists, asks if user wants to update.\n                else if (errorMessage === \"Duplicate name.\") {\n                    const match = persons.find((i) => i.name === newName);\n                    if (\n                        window.confirm(\n                            \"A phone number with this name already exists. Do you want to update the number?\"\n                        )\n                    ) {\n                        handleUpdate(match, { name: newName, number: newNumber });\n                        return;\n                    }\n                }\n                // If the number already exists, asks if user wants to update.\n                else if (errorMessage === \"Duplicate number.\") {\n                    const match = persons.find((i) => i.number === newNumber);\n                    if (\n                        window.confirm(\n                            \"This phone number is already assigned to a person. Do you want to update the name?\"\n                        )\n                    ) {\n                        handleUpdate(match, { name: newName, number: newNumber });\n                        return;\n                    }\n                } else {\n                    setError(true);\n                    setMessage(errorMessage);\n                    setTimeout(() => {\n                        setMessage(null);\n                    }, 3000);\n                }\n            });\n    };\n\n    const handleUpdate = (person, newData) => {\n        service\n            .update(person.id, newData)\n            .then(() => service.getAll())\n            .then((res) => {\n                setPersons(res);\n                setError(false);\n                setMessage(`Update successful: ${newData.name} - ${newData.number}`);\n                setTimeout(() => {\n                    setMessage(null);\n                }, 3000);\n            })\n            .catch(() => {\n                setError(true);\n                setMessage(person.name + \" is already deleted.\");\n                setTimeout(() => {\n                    setMessage(null);\n                }, 3000);\n            });\n    };\n\n    const handleDeleteClick = (id) => {\n        const person = persons.find((n) => n.id === id);\n\n        if (window.confirm(\"Confirm delete \" + person.name)) {\n            service\n                .remove(id)\n                .then(() => service.getAll())\n                .then((result) => {\n                    setPersons(result);\n                    setError(false);\n                    setMessage(\"Deleted \" + person.name);\n                    setTimeout(() => {\n                        setMessage(null);\n                    }, 3000);\n                })\n                .catch(() => {\n                    setError(true);\n                    setMessage(person.name + \" is already deleted.\");\n                });\n        }\n    };\n\n    const handleNumberChange = (e) => {\n        setNewNumber(e.target.value);\n    };\n\n    const handleNameChange = (e) => {\n        setNewName(e.target.value);\n    };\n\n    const handleSearchChange = (e) => {\n        setSearchWord(e.target.value);\n    };\n\n    let notification;\n    if (error) {\n        notification = <Notification error={true} message={message} />;\n    } else {\n        notification = <Notification error={false} message={message} />;\n    }\n\n    return (\n        <div>\n            <h2 className=\"main-header\">Phonebook</h2>\n            <Search changeHandler={handleSearchChange} />\n            <h3 className=\"sub-header\">Add a new person</h3>\n            <Add\n                nameChangeHandler={handleNameChange}\n                numberChangeHandler={handleNumberChange}\n                clickHandler={handleAddClick}\n            />\n            {notification}\n            <h2 className=\"sub-header\">Numbers</h2>\n            <table className=\"m-4\">\n                {persons.map((person) => {\n                    if (person.name.toLowerCase().includes(searchWord.toLowerCase())) {\n                        return (\n                            <Person\n                                key={person.name}\n                                name={person.name}\n                                number={person.number}\n                                clickHandler={() => handleDeleteClick(person.id)}\n                            />\n                        );\n                    } else {\n                        return null;\n                    }\n                })}\n            </table>\n        </div>\n    );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}